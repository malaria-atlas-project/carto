<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="uk.ac.ox.map.carto.server">
    <class name="AdminUnit" table="admin">
        <id column="gaul_code" name="id"></id>
		<property name="geom" type="org.hibernatespatial.GeometryUserType">
				<column name="geom" />
		</property>
		<property name="countryId">
				<column name="country_id" />
		</property>
		<property name="adminLevel">
				<column name="admin_level" />
		</property>
        <property name="name">
				<column name="name" />
        </property>
        <joined-subclass name="PfAdminUnit" table="pf_risk">
	        <key column="gaul_code"/>
	        <property name="risk" column="pf_risk"/>
	        <property name="afi" column="afi"/>
	    </joined-subclass>
        <joined-subclass name="PvAdminUnit" table="pv_risk">
	        <key column="gaul_code"/>
	        <property name="risk" column="pv_risk"/>
	        <property name="avi" column="avi"/>
	    </joined-subclass>
    </class>
    <class name="Country" table="country_extents">
        <id column="id" name="id"></id>
		<property name="geom" type="org.hibernatespatial.GeometryUserType">
				<column name="geom" />
		</property>
        <property name="name" column="name"></property>
        <joined-subclass name="PfCountry" table="api_pf_map_summary">
        	<key column="country_id"></key>
        	<property name="adminLevel" column="admin_level"></property>
        	<property name="count" column="count"></property>
	        <set name="zeroed" order-by="name" table="api_pv_zeroed_au">
	        	<key column="country_id"></key>
	        	<element column="name" type="string"></element>
	        </set>
	        <set name="years" order-by="year" table="api_pf_years">
	        	<key column="country_id"></key>
	        	<element column="year" type="integer"></element>
	        </set>
        </joined-subclass>
        <joined-subclass name="PvCountry" table="api_pv_map_summary">
        	<key column="country_id"></key>
        	<property name="adminLevel" column="admin_level"></property>
        	<property name="count" column="count"></property>
	        <set name="zeroed" order-by="name" table="api_pv_zeroed_au">
	        	<key column="country_id"></key>
	        	<element column="name" type="string"></element>
	        </set>
	        <set name="years" order-by="year" table="api_pv_years">
	        	<key column="country_id"></key>
	        	<element column="year" type="integer"></element>
	        </set>
        </joined-subclass>
    </class>
</hibernate-mapping>